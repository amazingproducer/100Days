<html>
	<head>
<link rel='manifest' href='manifest.webmanifest'>
	</head>
	</body>

	PrimeTools Docs<br>

<a href="flask_api.html">API documentation</a><br>
<a href="PrimeTools.html">Module and CLI documentation</a><br>


<button onclick="install()">
  Install
</button>


<script>
if ("serviceWorker" in navigator) {
  if (navigator.serviceWorker.controller) {
    console.log("[PrimeTools Docs] active service worker found, no need to register");
  } else {
    // Register the service worker
    navigator.serviceWorker
      .register("prime-tools-docs-sw.js", {
        scope: "/docs/"
      })
      .then(function (reg) {
        console.log("[PrimeTools Docs] Service worker has been registered for scope: " + reg.scope);
      });
  }
}
</script>
<script>
// Let's install the thing!
let deferredPrompt = null;

window.addEventListener('beforeinstallprompt', (e) => {
  // Prevent Chrome 67 and earlier from automatically showing the prompt
  e.preventDefault();
  // Stash the event so it can be triggered later.
  deferredPrompt = e;
});

async function install() {
  if (deferredPrompt) {
    deferredPrompt.prompt();
    console.log(deferredPrompt)
    deferredPrompt.userChoice.then(function(choiceResult){

      if (choiceResult.outcome === 'accepted') {
      console.log('PrimeTools Docs has been installed.');
    } else {
      console.log('PrimeTools Docs installation prompt ignored.');
    }

    deferredPrompt = null;

    });


  }
}
</script>
</body>
</html>
